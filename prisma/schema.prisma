generator client {
  provider = "prisma-client-js"
  // output = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

enum Role {
  admin
  user
}

model User {
  id                    String                @id @default(uuid()) @db.Uuid
  email                 String                @unique
  password              String?
  role                  Role                  @default(user)
  emailVerified         DateTime?             @db.Timestamp()
  image                 String?
  createdAt             DateTime              @default(now()) @db.Timestamp()
  updatedAt             DateTime              @updatedAt @db.Timestamp()
  emailVerificationToken EmailVerificationToken?
  providerAccounts      ProviderAccount[]
}

model EmailVerificationToken {
  userId    String   @id @db.Uuid
  token     String   @unique
  expiresAt DateTime @db.Timestamp()
  createdAt DateTime @default(now()) @db.Timestamp()
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model ProviderAccount {
  provider   String
  providerId String
  userId     String @db.Uuid
  type       String
  user       User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@id([provider, providerId])
}

model Product {
  id          String   @id @default(uuid()) @db.Uuid
  name        String
  description String?
  price       Decimal  @db.Decimal(10, 2)
  createdAt   DateTime @default(now()) @db.Timestamp()
  updatedAt   DateTime @updatedAt @db.Timestamp()
}

model Image {
  id       Int    @id @default(autoincrement())
  publicId String
  url      String
  owner    String
  ownerId  String @db.Uuid()

  @@index([owner, ownerId])
}
